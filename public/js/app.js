webpackJsonp([1],{0:function(t,e,n){n("sV/x"),t.exports=n("xZZD")},"0meT":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:["initialGames","user"],data:function(){return{current_games:[],finished_games:[]}},mounted:function(){this.current_games=this.initialGames.filter(function(t){return!t.stage3_has_finished}),this.finished_games=this.initialGames.filter(function(t){return t.stage3_has_finished}),this.listenForNewGroups()},methods:{listenForNewGroups:function(){var t=this;Echo.private("games").listen("GameCreated",function(e){t.current_games.push(e)})},watchGame:function(t){window.location.href="/games/"+t}}}},"23Nx":function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"card"},[n("div",{staticClass:"card-header text-center"},[t._v("Текущие игры")]),t._v(" "),n("div",{staticClass:"card-body"},[n("table",{staticClass:"table table-hover table-bordered"},[t._m(0,!1,!1),t._v(" "),n("tbody",t._l(t.current_games,function(e,s){return n("tr",{key:e.id,on:{click:function(n){t.watchGame(e.id)}}},[n("th",{attrs:{scope:"row"}},[t._v(t._s(s+1))]),t._v(" "),n("td",[t._v(t._s(e.title))]),t._v(" "),n("td",[t._v(t._s(e.user_colors_count))])])}))])])]),t._v(" "),n("div",{staticClass:"card"},[n("div",{staticClass:"card-header text-center"},[t._v("Завершенные игры")]),t._v(" "),n("div",{staticClass:"card-body"},[n("table",{staticClass:"table table-hover table-bordered"},[t._m(1,!1,!1),t._v(" "),n("tbody",t._l(t.finished_games,function(e,s){return n("tr",{key:e.id,on:{click:function(n){t.watchGame(e.id)}}},[n("th",{attrs:{scope:"row"}},[t._v(t._s(s+1))]),t._v(" "),n("td",[t._v(t._s(e.title))]),t._v(" "),n("td",[t._v(t._s(e.winner.user.name))])])}))])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",{staticClass:"thead-light"},[e("tr",[e("th",{attrs:{scope:"col"}},[this._v("#")]),this._v(" "),e("th",{attrs:{scope:"col"}},[this._v("Комната")]),this._v(" "),e("th",{attrs:{scope:"col"}},[this._v("Игроков")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("thead",{staticClass:"thead-light"},[e("tr",[e("th",{attrs:{scope:"col"}},[this._v("#")]),this._v(" "),e("th",{attrs:{scope:"col"}},[this._v("Комната")]),this._v(" "),e("th",{attrs:{scope:"col"}},[this._v("Победитель")])])])}]}},"8jYh":function(t,e,n){var s=n("cb8q");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);n("rjj0")("173fab5c",s,!0)},"9J9t":function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("div",{staticClass:"card bg-light"},[n("h5",{staticClass:"card-header text-center"},[t._v(t._s(t.game.title))]),t._v(" "),n("div",{staticClass:"card-body"},t._l(t.game.user_colors,function(e,s){return n("div",{key:s.id,staticClass:"row no-gutters"},[n("div",{staticClass:"col-8 col-md-10"},[t._v(t._s(e.user.name))]),t._v(" "),n("div",{staticClass:"col-4 col-md-2 player-square",style:{"background-color":e.color}},[t._v(t._s(e.score)+"\n                    баллов\n                ")])])}))]),t._v(" "),t.question?n("div",[n("div",{staticClass:"card text-center"},[n("h6",{staticClass:"card-header"},[t._v("\n                Вопрос\n            ")]),t._v(" "),n("div",{staticClass:"card-body"},[n("p",[t._v(t._s(t.question.title))]),t._v(" "),n("div",{staticClass:"a"},t._l(t.question.answers,function(e,s){return n("button",{key:s,staticClass:"btn btn-light",attrs:{id:"a-"+s},on:{click:function(e){t.answer(s)}}},[t._v("\n                        "+t._s(e)+"\n                    ")])})),t._v(" "),t.answers.length>0?n("div",t._l(t.answers,function(e,s){return n("div",{key:s},[t._v("\n                        "+t._s(e.name)+" дал "+t._s(e.is_correct?"правильный":"неправильный")+" "+t._s(e.ans)+" ответ\n                    ")])})):t._e()])])]):n("div",[t.winner?n("div",{staticClass:"text-center"},[n("p",{staticClass:"alert alert-success"},[t._v("Игра завершена. Победитель "+t._s(t.winner.name))])]):n("div",[t.move?n("div",{staticClass:"text-center"},[n("p",{staticClass:"alert alert-primary"},[t._v("Ждем хода игрока "+t._s(t.move.name))])]):t._e()])]),t._v(" "),n("div",{staticClass:"main"},t._l(t.game.count_y,function(e,s){return n("div",{key:s,staticClass:"row no-gutters"},t._l(t.game.count_x,function(e,r){return n("div",{key:r,staticClass:"box",class:t.review(r,s),on:{click:function(e){t.clickBox(r,s)}}})}))}))])},staticRenderFns:[]}},CaHl:function(t,e,n){var s=n("VU/8")(n("dPUi"),n("iR3L"),!1,null,null,null);t.exports=s.exports},DmFm:function(t,e,n){var s=n("VU/8")(n("0meT"),n("23Nx"),!1,null,null,null);t.exports=s.exports},ER1V:function(t,e,n){var s=n("VU/8")(n("au6M"),n("9J9t"),!1,function(t){n("8jYh")},null,null);t.exports=s.exports},"FZ+f":function(t,e){t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var n=function(t,e){var n=t[1]||"",s=t[3];if(!s)return n;if(e&&"function"==typeof btoa){var r=function(t){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t))))+" */"}(s),i=s.sources.map(function(t){return"/*# sourceURL="+s.sourceRoot+t+" */"});return[n].concat(i).concat([r]).join("\n")}return[n].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+n+"}":n}).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var s={},r=0;r<this.length;r++){var i=this[r][0];"number"==typeof i&&(s[i]=!0)}for(r=0;r<t.length;r++){var o=t[r];"number"==typeof o[0]&&s[o[0]]||(n&&!o[2]?o[2]=n:n&&(o[2]="("+o[2]+") and ("+n+")"),e.push(o))}},e}},"VU/8":function(t,e){t.exports=function(t,e,n,s,r,i){var o,a=t=t||{},c=typeof t.default;"object"!==c&&"function"!==c||(o=t,a=t.default);var u="function"==typeof a?a.options:a;e&&(u.render=e.render,u.staticRenderFns=e.staticRenderFns,u._compiled=!0),n&&(u.functional=!0),r&&(u._scopeId=r);var l;if(i?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),s&&s.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(i)},u._ssrRegister=l):s&&(l=s),l){var d=u.functional,f=d?u.render:u.beforeCreate;d?(u._injectStyles=l,u.render=function(t,e){return l.call(e),f(t,e)}):u.beforeCreate=f?[].concat(f,l):[l]}return{esModule:o,exports:a,options:u}}},WRGp:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t,e){var s=n("iuzX"),r=n.n(s);window._=n("M4fF");try{window.$=n("7t+N"),n("Zgw8").default,n("K3J8")}catch(t){}window.axios=n("mtWM"),window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";var i=document.head.querySelector('meta[name="csrf-token"]');i&&(window.axios.defaults.headers.common["X-CSRF-TOKEN"]=i.content),window.Pusher=n("jIVf"),window.Echo=new r.a({broadcaster:"pusher",key:"2e51ca3bb13d5c649395",cluster:"eu",encrypted:!0})}.call(e,n("7t+N"),n("Zgw8"))},au6M:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){e.default={props:["gameData","player","boxes","whoMoves","initialQuestion","competitiveBox"],data:function(){return{move:{id:"",name:""},game:{count_x:0,count_y:0,winner_user_color_id:0,user_colors:[]},answers:[],count_col:0,question:this.initialQuestion,common_box:this.competitiveBox,winner:null}},created:function(){var t=this;if(this.game=this.gameData,this.move=this.whoMoves,this.game.winner_user_color_id){var e=this.game.user_colors.filter(function(e){return e.id===t.game.winner_user_color_id})[0];this.winner=e.user}this.count_col=12/this.game.count_x},mounted:function(){this.listenForEvents(),this.player||this.$notify({text:"Вы зашли как гость"}),this.boxes.forEach(function(e){t(".b-"+e.x+"-"+e.y).css("background-color",e.color)}),this.common_box&&t(".b-"+this.common_box.x+"-"+this.common_box.y).css("background-color","grey")},methods:{review:function(t,e){return"col-"+this.count_col+" b-"+t+"-"+e},clickBox:function(t,e){var n=this;if(this.player){var s=this.player.id;axios.post("/games/"+this.game.id+"/box/clicked",{x:t,y:e,userColorId:s}).then(function(t){t.data.error&&n.$notify({text:t.data.error})})}else this.$notify({text:"Вы зашли как гость"})},answer:function(t){var e=this;if(this.player){var n=this.player.id,s=this.question.id;axios.post("/games/"+this.game.id+"/user/answered",{userAnswer:t,userColorId:n,questionId:s}).then(function(t){t.data.error&&e.$notify({text:t.data.error})})}else this.$notify({text:"Вы зашли как гость"})},listenForEvents:function(){var e=this;Echo.private("game."+this.game.id).listen("BoxClicked",function(e){t(".b-"+e.x+"-"+e.y).css("background-color",e.color)}).listen("ShowCompetitiveBox",function(e){t(".b-"+e.x+"-"+e.y).css("background-color","grey")}).listen("WhoMoves",function(t){e.move=t}).listen("WinnerFound",function(t){var n=e.game.user_colors.filter(function(e){return e.id===t.winner.id})[0];e.winner=n.user}).listen("NewQuestion",function(t){e.question=t}).listen("AnswersResults",function(n){n.results.forEach(function(t){var n=e.game.user_colors.filter(function(e){return e.id===t.user_color_id})[0];n.score=t.score,e.answers.push({name:n.user.name,ans:t.answer+1,is_correct:t.is_correct})}),t("#a-"+n.correct).attr("class","btn btn-success"),n.boxes.forEach(function(e){t(".b-"+e.x+"-"+e.y).css("background-color","white")}),setTimeout(function(){e.answers=[],e.question=null},5e3)})}}}}.call(e,n("7t+N"))},cb8q:function(t,e,n){(t.exports=n("FZ+f")(void 0)).push([t.i,".main{border:.05rem solid}.player-square{height:.05rem}.box{border:.05rem solid;height:10rem;background-color:#fff}",""])},dPUi:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:["initialUsers"],data:function(){return{title:"",count_x:2,count_y:2,users:[]}},methods:{createGroup:function(){var t=this;this.users.length<1||this.users.length>2?this.$notify({text:"Выберите одного или двух игроков"}):""!==this.title.trim()?axios.post("/games",{title:this.title,users:this.users,count_x:this.count_x,count_y:this.count_y}).then(function(e){t.title="",t.users=[],t.$notify({text:"Игра создана"})}):this.$notify({text:"Введите название игры"})}}}},iR3L:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card"},[n("div",{staticClass:"card-header text-center"},[t._v("Создание игровой комнаты")]),t._v(" "),n("div",{staticClass:"card-body"},[n("form",[n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"title"}},[t._v("Название игры")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],staticClass:"form-control",attrs:{id:"title",type:"text",required:""},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}})]),t._v(" "),n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"x"}},[t._v("Длина поля по x")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.count_x,expression:"count_x"}],staticClass:"form-control",attrs:{id:"x",min:"2",max:"4",type:"number"},domProps:{value:t.count_x},on:{input:function(e){e.target.composing||(t.count_x=e.target.value)}}})]),t._v(" "),n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"y"}},[t._v("Длина поля по y")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.count_y,expression:"count_y"}],staticClass:"form-control",attrs:{id:"y",min:"2",max:"4",type:"number"},domProps:{value:t.count_y},on:{input:function(e){e.target.composing||(t.count_y=e.target.value)}}})]),t._v(" "),n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"users"}},[t._v("Выберите пользователей...")]),t._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.users,expression:"users"}],staticClass:"form-control",attrs:{multiple:"",id:"users"},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.users=e.target.multiple?n:n[0]}}},t._l(t.initialUsers,function(e){return n("option",{key:e.id,domProps:{value:e.id}},[t._v("\n                        "+t._s(e.name)+"\n                    ")])}))]),t._v(" "),n("div",{staticClass:"form-group text-center"},[n("button",{staticClass:"btn btn-primary",attrs:{type:"submit"},on:{click:function(e){e.preventDefault(),t.createGroup(e)}}},[t._v("Создать")])])])])])},staticRenderFns:[]}},rjj0:function(t,e,n){function s(t){for(var e=0;e<t.length;e++){var n=t[e],s=u[n.id];if(s){s.refs++;for(o=0;o<s.parts.length;o++)s.parts[o](n.parts[o]);for(;o<n.parts.length;o++)s.parts.push(i(n.parts[o]));s.parts.length>n.parts.length&&(s.parts.length=n.parts.length)}else{for(var r=[],o=0;o<n.parts.length;o++)r.push(i(n.parts[o]));u[n.id]={id:n.id,refs:1,parts:r}}}}function r(){var t=document.createElement("style");return t.type="text/css",l.appendChild(t),t}function i(t){var e,n,s=document.querySelector('style[data-vue-ssr-id~="'+t.id+'"]');if(s){if(v)return h;s.parentNode.removeChild(s)}if(_){var i=f++;s=d||(d=r()),e=o.bind(null,s,i,!1),n=o.bind(null,s,i,!0)}else s=r(),e=function(t,e){var n=e.css,s=e.media,r=e.sourceMap;s&&t.setAttribute("media",s);r&&(n+="\n/*# sourceURL="+r.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");if(t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}.bind(null,s),n=function(){s.parentNode.removeChild(s)};return e(t),function(s){if(s){if(s.css===t.css&&s.media===t.media&&s.sourceMap===t.sourceMap)return;e(t=s)}else n()}}function o(t,e,n,s){var r=n?"":s.css;if(t.styleSheet)t.styleSheet.cssText=m(e,r);else{var i=document.createTextNode(r),o=t.childNodes;o[e]&&t.removeChild(o[e]),o.length?t.insertBefore(i,o[e]):t.appendChild(i)}}var a="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!a)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var c=n("tTVk"),u={},l=a&&(document.head||document.getElementsByTagName("head")[0]),d=null,f=0,v=!1,h=function(){},_="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());t.exports=function(t,e,n){v=n;var r=c(t,e);return s(r),function(e){for(var n=[],i=0;i<r.length;i++){var o=r[i];(a=u[o.id]).refs--,n.push(a)}e?s(r=c(t,e)):r=[];for(i=0;i<n.length;i++){var a=n[i];if(0===a.refs){for(var l=0;l<a.parts.length;l++)a.parts[l]();delete u[a.id]}}}};var m=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}()},"sV/x":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n("CLX7"),r=n.n(s);n("WRGp"),window.Vue=n("I3G/"),Vue.use(r.a),window.Bus=new Vue,Vue.component("games",n("DmFm")),Vue.component("game",n("ER1V")),Vue.component("create-game",n("CaHl"));new Vue({el:"#app"})},tTVk:function(t,e){t.exports=function(t,e){for(var n=[],s={},r=0;r<e.length;r++){var i=e[r],o=i[0],a={id:t+":"+r,css:i[1],media:i[2],sourceMap:i[3]};s[o]?s[o].parts.push(a):n.push(s[o]={id:o,parts:[a]})}return n}},xZZD:function(t,e){}},[0]);